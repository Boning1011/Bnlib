{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "heightfield_maskbyocclusion", "icon": "SOP/heightfield_maskbyconcavity", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["HeightField Mask by Occlusion"], "extent": [0, 34]}, {"type": "summary", "indent": 0, "text": ["Creates a mask where the input terrain is hollow/depressed, for example riverbeds and valleys."], "extent": [162, 264]}, {"type": "para", "indent": 0, "text": ["The node measures occlusion as ", {"type": "q", "text": ["how much of a sphere centered on the point is visible from the given point."]}, " It sends rays from each point in different directions and measures how many hit terrain before reaching their maximum distance."], "extent": [264, 502]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/nodes/sop/heightfield_concavity.jpg", "type": "img", "text": ""}], "extent": [502, 555]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [555, 567], "body": [{"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Masking"], "extent": [567, 582], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Combine with Existing"], "extent": [459, 482], "body": [{"type": "para", "indent": 4, "text": ["How to combine this mask with any existing mask in the input."], "extent": [504, 575]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": ["Replace"], "extent": [575, 588], "body": [{"type": "para", "indent": 8, "text": ["Clear the existing mask and replace it with the new mask."], "extent": [588, 663]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Add"], "extent": [663, 672], "body": [{"type": "para", "indent": 8, "text": ["Add the values in this mask to any existing mask."], "extent": [672, 739]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Subtract"], "extent": [739, 753], "body": [{"type": "para", "indent": 8, "text": ["Subtract the values in this mask from any existing mask."], "extent": [753, 827]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Difference"], "extent": [827, 843], "body": [{"type": "para", "indent": 8, "text": ["Set the mask values to the difference between the old mask and this mask."], "extent": [843, 926]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Multiply"], "extent": [926, 940], "body": [{"type": "para", "indent": 8, "text": ["Multiply the values of the old mask by the values in this mask. This might be useful to ", {"type": "q", "text": ["scale"]}, " existing values while leaving empty areas alone."], "extent": [940, 1094]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Maximum"], "extent": [1094, 1107], "body": [{"type": "para", "indent": 8, "text": ["Set the mask values to the maximum of the old mask and this mask."], "extent": [1107, 1190]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Minimum"], "extent": [1190, 1203], "body": [{"type": "para", "indent": 8, "text": ["Set the mask values to the minimum of the old mask and this mask."], "extent": [1203, 1286]}], "container": true}, {"type": "dt", "indent": 4, "text": ["Blend"], "extent": [1286, 1297], "body": [{"type": "para", "indent": 8, "text": ["Blend the old mask and this mask by a certain amount."], "extent": [1297, 1360]}], "container": true}], "container": true}], "container": true, "attrs": {"id": "combine"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blend"], "extent": [1360, 1367], "body": [{"type": "para", "indent": 4, "text": ["The amount to blend the old mask with what you draw, when ", {"type": "ui", "text": ["Combine with existing"]}, " is ", {"type": "q", "text": ["blend"]}, ". A value of ", {"type": "code", "text": ["0"]}, " leaves the existing mask, a value of ", {"type": "code", "text": ["1"]}, " replaces with the new mask, a value of ", {"type": "code", "text": ["0.5"]}, " blends equally between the old and new mask."], "extent": [1387, 1635]}], "container": true, "attrs": {"id": "blend"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Minimum Occlusion"], "extent": [663, 682], "body": [{"type": "para", "indent": 4, "text": ["Scales the output mask. Areas with occlusion less than or equal to this value will have mask 0.0."], "extent": [708, 811]}], "container": true, "attrs": {"id": "minexposure"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Maximum Occlusion"], "extent": [811, 830], "body": [{"type": "para", "indent": 4, "text": ["Scales the output mask. Areas with occlusion greater than or equal to this value with have mask 1.0."], "extent": [856, 962]}], "container": true, "attrs": {"id": "maxexposure"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Occlusion Ramp"], "extent": [962, 978], "body": [{"type": "para", "indent": 4, "text": ["A ramp mapping the sunlight exposure at a given point (ranging from 0 to 1, with higher values being more exposed) to the mask value at that point."], "extent": [993, 1146]}], "container": true, "attrs": {"id": "ramp"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sample from Hemisphere"], "extent": [1146, 1170], "body": [{"type": "para", "indent": 4, "text": ["Instead of measuring the visibility of a sphere centered on each point, measure the visibility of a hemisphere in the Y direction."], "extent": [1197, 1334]}], "container": true, "attrs": {"id": "dohemisphere"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Quality"], "extent": [1334, 1350], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["View Distance"], "extent": [1350, 1366], "body": [{"type": "para", "indent": 4, "text": ["How far to send rays to determine if a point can see the sky. Longer distances give more accurate measurements, but can be slower. A value of 0 corresponds to a view distance of infinity."], "extent": [1393, 1590]}], "container": true, "attrs": {"id": "viewdistance"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Step Scale"], "extent": [1590, 1602], "body": [{"type": "para", "indent": 4, "text": ["How finely to step along the rays to determine if a point can see the sky. Larger values are faster but might miss thin features."], "extent": [1626, 1765]}], "container": true, "attrs": {"id": "stepscale"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Number of Searches"], "extent": [1765, 1785], "body": [{"type": "para", "indent": 4, "text": ["How many rays to send to determine if a point can see the sky. Larger numbers give more accurate measurements, but can be slower."], "extent": [1811, 1951]}], "container": true, "attrs": {"id": "numsearches"}, "role": "item"}], "container": true, "role": "item_group"}]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Layer Bindings"], "extent": [1951, 1972], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Mask Layer"], "extent": [124, 136], "body": [{"type": "para", "indent": 4, "text": ["If a mask volume is wired into this node\u2019s second input, this specifies which volume in the second input to use to mask this node\u2019s effect, usually ", {"type": "code", "text": ["mask"]}, ". Click the ", {"type": "q", "text": ["Add mask paint"]}, " button to paint the mask directly in the viewport (this automatically adds a paint node to the second input)."], "extent": [160, 459]}], "container": true, "attrs": {"id": "masklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Height Layer"], "extent": [16, 30], "body": [{"type": "para", "indent": 4, "text": ["The name of the height volume to operate on, usually ", {"type": "code", "text": ["height"]}, "."], "extent": [56, 124]}], "container": true, "attrs": {"id": "heightlayer"}, "role": "item"}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["HeightField Mask by Occlusion"], "summary": ["Creates a mask where the input terrain is hollow/depressed, for example riverbeds and valleys."], "included": ["/nodes/sop/_heightfield_common"]}