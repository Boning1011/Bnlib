{"type": "root", "attrs": {"type": "node", "context": "dop", "internal": "impactanalysis", "icon": "DOP/affector", "since": "12.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Impact Analysis"], "extent": [86, 106]}, {"type": "summary", "indent": 0, "text": ["Stores filtered information about impacts on an RBD object. The shelf tool has no effect in the viewport, it just sets up nodes in the network to record the impact data."], "extent": [106, 284]}, {"type": "para", "indent": 0, "text": ["This node creates ", {"type": "code", "text": ["ImpactAnalysis"]}, " geometry sub-data on the RBD object for each physical point of impact."], "extent": [284, 391]}, {"type": "para", "indent": 0, "text": ["You can filter impact information based on ", {"type": "em", "text": ["time"]}, ", impact ", {"type": "em", "text": ["strength"]}, ", impact ", {"type": "em", "text": ["distance"]}, ", or the other ", {"type": "em", "text": ["object"]}, ", preventing the list of impacts from becoming cluttered or filled with useless impacts."], "extent": [391, 591]}, {"type": "para", "indent": 0, "text": ["The impact points are useful in surface networks. For example:"], "extent": [591, 655]}, {"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can use the points as ", {"scheme": null, "value": "/pyro/clustering", "type": "link", "text": ["clustered fluid simulation"], "fullpath": "/pyro/clustering.html"}, " source points, so you can raise dust clouds wherever debris hits the ground."], "extent": [655, 807]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can create geometry centered on the points, then use a ", {"scheme": "Node", "value": "/nodes/sop/cookie", "type": "link", "text": ["Cookie node"], "fullpath": "/nodes/sop/cookie.html"}, " to remove those shapes from the ground geometry, to create craters, divots, bullet holes, or whatever."], "extent": [807, 1002]}], "container": true}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Setup"], "extent": [1002, 1014], "body": [{"type": "task_group", "body": [{"ext": null, "type": "task", "indent": 0, "text": ["Set up Impact Analysis using the shelf"], "role": "item", "extent": [1014, 1061], "body": [{"type": "ord_group", "body": [{"blevel": 6, "type": "ord", "indent": 4, "text": ["Select the RBD object you want to record impacts."], "extent": [1061, 1122]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["On the ", {"type": "ui", "text": ["Rigid Bodies"]}, " tab, click ", {"scheme": "Icon", "value": "DOP/affector", "type": "link", "text": "", "fullpath": "/nodes/dop/DOP/affector.html"}, " RBD Impacts, then press ", {"keys": ["Enter"], "type": "keys", "text": null}, "."], "extent": [1122, 1223]}], "container": true}, {"type": "para", "indent": 4, "text": ["This will have no visible effect in the viewer. It simply sets up the nodes necessary to record the RBD object\u2019s impacts. See below for how to use that information in a surface network."], "extent": [1223, 1414]}], "container": true}, {"ext": null, "type": "task", "indent": 0, "text": ["Add the Impact Analysis node to the network manually"], "role": "item", "extent": [1414, 1474], "body": [{"type": "para", "indent": 4, "text": ["This node is a ", {"type": "em", "text": ["solver"]}, ". You must apply this solver ", {"type": "em", "text": ["after"]}, " the RBD solver so Impact Analysis can see the RBD solver\u2019s collision. For example use a ", {"scheme": "Node", "value": "/nodes/dop/multisolver", "type": "link", "text": ["Multiple Solver"], "fullpath": "/nodes/dop/multisolver.html"}, " with the RBD solver as the first green (data) input and this node as the second green input."], "extent": [1474, 1759], "body": [{"type": "para", "indent": 8, "text": ["(If there\u2019s a conflict with the RBD Solver, try assigning a different ", {"type": "ui", "text": ["Data Name"]}, ".)"], "extent": [1759, 1854]}], "container": true}], "container": true}, {"ext": null, "type": "task", "indent": 0, "text": ["Import the impact points into a surface network"], "role": "item", "extent": [1854, 1909], "body": [{"type": "ord_group", "body": [{"blevel": 6, "type": "ord", "indent": 4, "text": ["In the surface network, create a ", {"scheme": "Node", "value": "/nodes/sop/dopimport", "type": "link", "text": ["Dop Import"], "fullpath": "/nodes/sop/dopimport.html"}, " node."], "extent": [1909, 1991]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Set the ", {"type": "ui", "text": ["DOP Network"]}, " to the path of the DOP network containing the RBD object (for example, ", {"type": "code", "text": ["/obj/AutoDopNetwork"]}, ")."], "extent": [1991, 2121]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Set the ", {"type": "ui", "text": ["Object Mask"]}, " to the name of the RBD object (for example, ", {"type": "code", "text": ["sphere_object1"]}, ")."], "extent": [2121, 2219], "body": [{"type": "para", "indent": 8, "text": ["To fetch the impact data from multiple objects at once, you can use a pattern here (for example, ", {"type": "code", "text": ["impact_object*"]}, ")."], "extent": [2219, 2348]}], "container": true}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Set ", {"type": "ui", "text": ["Import Style"]}, " to ", {"type": "q", "text": ["Fetch Geometry from DOP Network"]}, "."], "extent": [2348, 2418]}, {"blevel": 6, "type": "ord", "indent": 4, "text": ["Set the ", {"type": "ui", "text": ["Geometry Data Path"]}, " to ", {"type": "code", "text": ["ImpactAnalysis"]}, "."], "extent": [2418, 2481]}], "container": true}, {"type": "para", "indent": 4, "text": ["You may need to turn on ", {"scheme": "Icon", "value": "VIEW/display_points", "type": "link", "text": "", "fullpath": "/nodes/dop/VIEW/display_points.html"}, " Points in the display toolbar on the right side of the viewer to see the imported impact points."], "extent": [2481, 2634]}], "container": true}, {"ext": null, "type": "task", "indent": 0, "text": ["Access information about the impact points"], "role": "item", "extent": [2634, 2684], "body": [{"type": "para", "indent": 4, "text": ["Impact points have the following attributes."], "extent": [2684, 2738]}, {"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["P"]}], "extent": [2738, 2747], "body": [{"type": "para", "indent": 8, "text": ["Position of the impact."], "extent": [2747, 2779]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["impacttime"]}], "extent": [2779, 2797], "body": [{"type": "para", "indent": 8, "text": ["Time of the impact."], "extent": [2797, 2825]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["avgposition"]}], "extent": [2825, 2844], "body": [{"type": "para", "indent": 8, "text": ["The average position of all unfiltered impact points at the same time sharing the same object."], "extent": [2844, 2947]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["impulse"]}], "extent": [2947, 2962], "body": [{"type": "para", "indent": 8, "text": ["Force of the impact."], "extent": [2962, 2991]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["v"]}], "extent": [2991, 3000], "body": [{"type": "para", "indent": 8, "text": ["Speed of the impact."], "extent": [3000, 3029]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["avgimpulse"]}], "extent": [3029, 3047], "body": [{"type": "para", "indent": 8, "text": ["The average impulse of all unfiltered impact points at the same time sharing the same object."], "extent": [3047, 3149]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["impactobject"]}], "extent": [3149, 3169], "body": [{"type": "para", "indent": 8, "text": ["The DOP object ID of the object being hit."], "extent": [3169, 3220]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["impactprimnum"]}], "extent": [3220, 3241], "body": [{"type": "para", "indent": 8, "text": ["The primitive number of the object being hit. This can be used to identify impacts for individual pieces of an ", {"scheme": "Node", "value": "/nodes/dop/rbdpackedobject", "type": "link", "text": ["RBD Packed Object"], "fullpath": "/nodes/dop/rbdpackedobject.html"}, "."], "extent": [3241, 3406]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["parentobject"]}], "extent": [3406, 3426], "body": [{"type": "para", "indent": 8, "text": ["The DOP object ID of the object recording the impact."], "extent": [3426, 3488]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["parentprimnum"]}], "extent": [3488, 3509], "body": [{"type": "para", "indent": 8, "text": ["The primitive number of the object recording the impact."], "extent": [3509, 3574]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["N"]}], "extent": [3574, 3583], "body": [{"type": "para", "indent": 8, "text": ["The impact normal."], "extent": [3583, 3610]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["distance"]}], "extent": [3610, 3626], "body": [{"type": "para", "indent": 8, "text": ["Distance from the previous filtered impact point."], "extent": [3626, 3685]}], "container": true}], "container": true}, {"type": "para", "indent": 4, "text": ["To access fields on the DOP objects that collided, for example to get the mass of the impacted object, you can use the ", {"scheme": "Exp", "value": "/expressions/dopfield", "type": "link", "text": "", "fallback_text": "dopfield()", "fullpath": "/expressions/dopfield.html"}, " expression function."], "extent": [3685, 3849]}, {"lang": "expr", "type": "pre", "indent": 4, "text": ["\n    dopfield(\"/obj/AutoDopNetwork\", $impactobject, \"Position\", \"Options\", 0, \"mass\")\n    "], "extent": [3849, 3961]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [3961, 3974], "body": [{"type": "para", "indent": 0, "text": ["The parameters let you filter out impact points, for example ignoring all but one impact that happen very close together in space and time."], "extent": [3974, 4116]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Display Geometry"], "extent": [4116, 4134], "body": [{"type": "para", "indent": 4, "text": ["Controls if the impact points are displayed in the viewport."], "extent": [4134, 4200]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Time Threshold"], "extent": [4200, 4216], "body": [{"type": "para", "indent": 4, "text": ["The minimum amount of time (in seconds) between recorded impact points. Higher values give fewer impact points and bigger gaps in time."], "extent": [4216, 4357]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Impact Threshold"], "extent": [4357, 4375], "body": [{"type": "para", "indent": 4, "text": ["The minimum amount of impact force for recorded impact points. Higher values only create points for stronger impacts and ignore weaker impacts."], "extent": [4375, 4524]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Distance Threshold"], "extent": [4524, 4544], "body": [{"type": "para", "indent": 4, "text": ["The minimum distance between recorded impact points. Higher values give fewer impact points and bigger gaps in space."], "extent": [4544, 4667]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Force Impact Object"], "extent": [4667, 4688], "body": [{"type": "para", "indent": 4, "text": ["Only create impact points for collisions with this DOP object."], "extent": [4688, 4756]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "outputs", "container": true, "type": "outputs_section", "indent": 0, "role": "section", "extent": [4756, 4765], "body": [{"type": "para", "indent": 0, "text": ["The input objects are passed through to the output."], "extent": [4765, 4819]}], "text": "Outputs"}, {"level": 1, "id": "locals", "container": true, "type": "locals_section", "indent": 0, "role": "section", "extent": [4819, 4827], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["ST"], "extent": [16, 20], "body": [{"type": "para", "indent": 4, "text": ["The simulation time for which the node is being evaluated. "], "extent": [20, 89]}, {"type": "para", "indent": 4, "text": ["Depending on the settings of the ", {"scheme": "Node", "value": "/nodes/obj/dopnet", "type": "link", "text": ["DOP Network"], "fullpath": "/nodes/obj/dopnet.html"}, " \n    ", {"type": "ui", "text": ["Offset Time"]}, " and ", {"type": "ui", "text": ["Scale Time"]}, " parameters, \n    this value may not be equal to the current Houdini time\n    represented by the variable T. "], "extent": [89, 310]}, {"type": "para", "indent": 4, "text": ["ST is guaranteed to have a value of zero at the\n    start of a simulation, so when testing for the first timestep of a\n    simulation, it is best to use a test like ", {"type": "code", "text": ["$ST == 0"]}, ", rather than\n    ", {"type": "code", "text": ["$T == 0"]}, " or ", {"type": "code", "text": ["$FF == 1"]}, "."], "extent": [310, 533]}], "container": true}, {"type": "dt", "indent": 0, "text": ["SF"], "extent": [533, 537], "body": [{"type": "para", "indent": 4, "text": ["The simulation frame (or more accurately, the \n    simulation time step number) for which the node is being evaluated."], "extent": [537, 665]}, {"type": "para", "indent": 4, "text": ["Depending on the settings of the ", {"scheme": "Node", "value": "/nodes/obj/dopnet", "type": "link", "text": ["DOP Network"], "fullpath": "/nodes/obj/dopnet.html"}, " parameters, \n    this value may not be equal to the current Houdini frame number\n    represented by the variable F. Instead, it is equal to\n    the simulation time (ST) divided by the simulation timestep size \n    (TIMESTEP)."], "extent": [665, 959]}], "container": true}, {"type": "dt", "indent": 0, "text": ["TIMESTEP"], "extent": [959, 969], "body": [{"type": "para", "indent": 4, "text": ["The size of a simulation timestep. This value is\n    useful for scaling values that are expressed in units per second, but\n    are applied on each timestep."], "extent": [969, 1131]}], "container": true}, {"type": "dt", "indent": 0, "text": ["SFPS"], "extent": [1131, 1137], "body": [{"type": "para", "indent": 4, "text": ["The inverse of the TIMESTEP value. It is the number\n    of timesteps per second of simulation time."], "extent": [1137, 1242]}], "container": true}, {"type": "dt", "indent": 0, "text": ["SNOBJ"], "extent": [1242, 1249], "body": [{"type": "para", "indent": 4, "text": ["The number of objects in the simulation. For nodes that\n    create objects such as the ", {"scheme": "Node", "value": "/nodes/dop/emptyobject", "type": "link", "text": ["Empty Object DOP"], "fullpath": "/nodes/dop/emptyobject.html"}, ",\n    SNOBJ increases for each object that is evaluated. "], "extent": [1249, 1442]}, {"type": "para", "indent": 4, "text": ["A good way to guarantee unique object names is to use an expression\n    like ", {"type": "code", "text": ["object_$SNOBJ"]}, "."], "extent": [1442, 1541]}], "container": true}, {"type": "dt", "indent": 0, "text": ["NOBJ"], "extent": [1541, 1547], "body": [{"type": "para", "indent": 4, "text": ["The number of objects that are evaluated by the\n    current node during this timestep. This value is often \n    different from SNOBJ, as many nodes do not process all the objects\n    in a simulation. "], "extent": [1547, 1757]}, {"type": "para", "indent": 4, "text": ["NOBJ may return 0 if the node does not\n    process each object sequentially (such as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group\n    DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [1757, 1884]}], "container": true}, {"type": "dt", "indent": 0, "text": ["OBJ"], "extent": [1884, 1889], "body": [{"type": "para", "indent": 4, "text": ["The index of the specific object being processed by\n    the node. This value always runs from zero to NOBJ-1 in a given\n    timestep. It does not identify the current object within the\n    simulation like OBJID or OBJNAME; it only identifies the object\u2019s \n    position in the current order of processing. "], "extent": [1889, 2204]}, {"type": "para", "indent": 4, "text": ["This value is useful for generating a\n    random number for each object, or simply splitting the objects into\n    two or more groups to be processed in different ways. This value\n    is -1 if the node does not process objects sequentially (such\n    as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [2204, 2494]}], "container": true}, {"type": "dt", "indent": 0, "text": ["OBJID"], "extent": [2494, 2501], "body": [{"type": "para", "indent": 4, "text": ["The unique identifier for the object being\n    processed. Every object is assigned an integer value that is unique\n    among all objects in the simulation for all time. Even if an object\n    is deleted, its identifier is never reused. This is very useful in\n    situations where each object needs to be treated differently, for \n    example, to produce a unique random number for each object. "], "extent": [2501, 2900]}, {"type": "para", "indent": 4, "text": ["This value is also the best way to look up information on an object using the dopfield expression function. "], "extent": [2900, 3014]}, {"type": "para", "indent": 4, "text": ["OBJID is -1 if the node does not process objects\n    sequentially (such as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [3014, 3127]}], "container": true}, {"type": "dt", "indent": 0, "text": ["ALLOBJIDS"], "extent": [3127, 3138], "body": [{"type": "para", "indent": 4, "text": ["This string contains a space-separated list of the unique object\n    identifiers for every object being processed by the current node."], "extent": [3138, 3278]}], "container": true}, {"type": "dt", "indent": 0, "text": ["ALLOBJNAMES"], "extent": [3278, 3291], "body": [{"type": "para", "indent": 4, "text": ["This string contains a space-separated list of the names of every\n    object being processed by the current node."], "extent": [3291, 3410]}], "container": true}, {"type": "dt", "indent": 0, "text": ["OBJCT"], "extent": [3410, 3417], "body": [{"type": "para", "indent": 4, "text": ["The simulation time (see variable ST) at which the\n    current object was created. "], "extent": [3417, 3510]}, {"type": "para", "indent": 4, "text": ["To check if an object was created\n    on the current timestep, the expression ", {"type": "code", "text": ["$ST == $OBJCT"]}, " should\n    always be used. "], "extent": [3510, 3637]}, {"type": "para", "indent": 4, "text": ["This value is zero if the node does not process\n    objects sequentially (such as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [3637, 3757]}], "container": true}, {"type": "dt", "indent": 0, "text": ["OBJCF"], "extent": [3757, 3764], "body": [{"type": "para", "indent": 4, "text": ["The simulation frame (see variable SF) at which the \n    current object was created. It is equivalent to using the \n    dopsttoframe expression on the OBJCT variable. "], "extent": [3764, 3937]}, {"type": "para", "indent": 4, "text": ["This value is zero if the node does not process objects \n    sequentially (such as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [3937, 4058]}], "container": true}, {"type": "dt", "indent": 0, "text": ["OBJNAME"], "extent": [4058, 4067], "body": [{"type": "para", "indent": 4, "text": ["A string value containing the name of the object being\n    processed. "], "extent": [4067, 4147]}, {"type": "para", "indent": 4, "text": ["Object names are not guaranteed to be unique within a\n    simulation. However, if you name your objects carefully so that they\n    are unique, the object name can be a much easier way to identify an\n    object than the unique object identifier, OBJID. "], "extent": [4147, 4409]}, {"type": "para", "indent": 4, "text": ["The object name can\n    also be used to treat a number of similar objects (with the same\n    name) as a virtual group. If there are 20 objects named ", {"type": "q", "text": ["myobject"]}, ",\n    specifying ", {"type": "code", "text": ["strcmp($OBJNAME, \"myobject\") == 0"]}, " in the activation field\n    of a DOP will cause that DOP to operate on only those 20 objects. "], "extent": [4409, 4721]}, {"type": "para", "indent": 4, "text": ["This value is the empty string if the node does not process objects\n    sequentially (such as the ", {"scheme": "Node", "value": "/nodes/dop/group", "type": "link", "text": ["Group DOP"], "fullpath": "/nodes/dop/group.html"}, ")."], "extent": [4721, 4853]}], "container": true}, {"type": "dt", "indent": 0, "text": ["DOPNET"], "extent": [4853, 4861], "body": [{"type": "para", "indent": 4, "text": ["A string value containing the full path of the current DOP\n    network. This value is most useful in DOP subnet digital assets\n    where you want to know the path to the DOP network that contains the\n    node."], "extent": [4861, 5076]}], "container": true}], "container": true}, {"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [5076, 5082], "body": [{"type": "para", "indent": 4, "text": ["Most dynamics nodes have local variables with the same names as the\n    node\u2019s parameters. For example, in a ", {"scheme": "Node", "value": "/nodes/dop/position", "type": "link", "text": ["Position DOP"], "fullpath": "/nodes/dop/position.html"}, ",\n    you could write the expression:"], "extent": [5082, 5270]}, {"lang": null, "type": "pre", "indent": 4, "text": ["\n    $tx + 0.1\n    "], "extent": [5270, 5300]}, {"type": "para", "indent": 4, "text": ["\u2026to make the object move 0.1 units along the X axis at each timestep."], "extent": [5300, 5380]}], "container": true}], "container": true, "role": "item_group"}], "text": "Locals"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4855, 4864], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": null, "value": "/shelf/rbdobject", "type": "link", "text": ["RBD Object"], "fullpath": "/shelf/rbdobject.html"}], "extent": [4864, 4897]}], "container": true}], "text": "Related"}], "title": ["Impact Analysis"], "summary": ["Stores filtered information about impacts on an RBD object. The shelf tool has no effect in the viewport, it just sets up nodes in the network to record the impact data."], "included": ["/nodes/dop/standard_locals"]}