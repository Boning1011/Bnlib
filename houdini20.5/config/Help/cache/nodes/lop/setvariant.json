{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "setvariant", "icon": "LOP/setvariant", "group": "variants", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Set Variant"], "extent": [0, 16]}, {"type": "summary", "indent": 0, "text": ["Selects (switches to) one of the variants stored in a variant set on a primitive."], "extent": [117, 207]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [207, 222], "body": [{"type": "para", "indent": 0, "text": ["USD allows storing multiple named ", {"type": "em", "text": ["variants"]}, " of a primitive on the primitive. Each variant can have different attributes, relationships, and children. You can switch the primitive between different variants in different layers. Each primitive can store multiple groups of variants in named ", {"type": "em", "text": ["variant sets"]}, ". ", {"scheme": null, "value": "https://graphics.pixar.com/usd/docs/USD-Glossary.html#USDGlossary-VarientSet", "type": "link", "text": ["See Variant Set in Pixar USD glossary"], "exists": true}, "."], "extent": [222, 648]}, {"type": "para", "indent": 0, "text": ["This node switches the currently selected variant in a variant set. To create variants, use the ", {"scheme": "Node", "value": "/nodes/lop/addvariant", "type": "link", "text": ["Add Variant node"], "fullpath": "/nodes/lop/addvariant.html"}, "."], "extent": [648, 786]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips"], "extent": [786, 797], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["If the named variant set does not exist, the node does not change the primitive."], "extent": [797, 882]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If the named variant set exists, but the named variant does not exist within it, this node ", {"type": "em", "text": ["clears"]}, " the current variant selection on the primitive. This does not produce any warning or error."], "extent": [882, 1077]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If a list of variant names is provided, this node will pick the first one that matches a valid variant name for the given variant set per prim.  If none of the variant names in the list match a valid variant for the given variant set this node will not affect the prim.  Note this is different behaviour than if a single variant name is supplied but doesn\u2019t exist for the given variant set."], "extent": [1077, 1471]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you want to select a random variant, turn on ", {"type": "ui", "text": ["Choose variant name by index"]}, ". This sets the node to choose the variant by position instead of by name. Then set the ", {"type": "ui", "text": ["Variant name index"]}, " to an expression like ", {"type": "code", "text": ["int(rand(0.1) * (N - 1))"]}, " (where N is the number of variants, and ", {"type": "code", "text": ["0.1"]}, " is the random seed). "], "extent": [1471, 1782]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["In any parameter for picking a variant set or variant name, you can use the\n  following local variables:"], "extent": [1782, 1890], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["@numprim"]}], "extent": [1890, 1906], "body": [{"type": "para", "indent": 8, "text": ["The total number of primitives being affected by this multiparm instance."], "extent": [1906, 1988]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["@prim"]}], "extent": [1988, 2001], "body": [{"type": "para", "indent": 8, "text": ["Index of the primitive having its variant selection set. This value goes from ", {"type": "code", "text": ["0"]}, " to ", {"type": "code", "text": ["@numprim-1"]}, " for each multiparm instance."], "extent": [2001, 2136]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["@primpath"]}], "extent": [2136, 2153], "body": [{"type": "para", "indent": 8, "text": ["The path of the primitive having its variant selection set."], "extent": [2153, 2221]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["@numvariantsets"]}], "extent": [2221, 2244], "body": [{"type": "para", "indent": 8, "text": ["The number of variant sets on the current primitive."], "extent": [2244, 2305]}], "container": true}, {"type": "dt", "indent": 4, "text": [{"type": "code", "text": ["@numvariants"]}], "extent": [2305, 2325], "body": [{"type": "para", "indent": 8, "text": ["The number of variants in the chosen variant set on the current primitive."], "extent": [2325, 2409]}], "container": true}], "container": true}], "container": true}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2409, 2421], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Number of Variants"], "extent": [2421, 2442], "body": [{"type": "para", "indent": 4, "text": ["You can perform multiple variant selections in a single Set Variant node. Set this to the number of selections you want to make, or use the plus and minus buttons to add or remove selections."], "extent": [2464, 2661]}], "container": true, "attrs": {"id": "num_variants"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Primitives"], "extent": [16, 28], "body": [{"type": "para", "indent": 4, "text": ["The primitive(s) the node should operate on. You can drag primitives from the scene graph tree pane into this textbox to add their paths, or click the ", {"scheme": "Smallicon", "value": "BUTTONS/reselect", "type": "link", "text": "", "fullpath": "/nodes/lop/BUTTONS/reselect.html"}, " Reselect button beside the text box to select the primitives in the viewer, or ", {"keys": ["Ctrl"], "type": "keys", "text": null}, "-click the Reselect button to choose prims from a pop-up tree window. You can also use ", {"scheme": null, "value": "/solaris/pattern", "type": "link", "text": ["primitive patterns"], "fullpath": "/solaris/pattern.html"}, " for advanced matching, including matching all prims in a collection (using ", {"type": "code", "text": ["/path/to/prim.collection:", {"type": "var", "text": ["name"]}]}, ")."], "extent": [50, 560]}, {"type": "note_group", "body": [{"type": "note", "indent": 4, "role": "item", "extent": [560, 570], "body": [{"type": "para", "indent": 8, "text": ["This parameter needs to be exposed in order for the transform handles to be context-aware. Without it, the handles may not be positioned properly."], "extent": [570, 725]}], "container": true}], "container": true, "role": "item_group"}], "container": true, "attrs": {"id": "primpattern"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Choose Variant Set by Index"], "extent": [2685, 2714], "body": [{"type": "para", "indent": 4, "text": ["When this is on, you specify the variant set using a number representing the index of a variant set in the alphabetically sorted list of variant sets, rather than a name. If you are doing something like choosing a variant set using a random number generator, it\u2019s easier to deal with variant sets by their index rather than their name."], "extent": [2742, 3083]}], "container": true, "attrs": {"id": "variantsetuseindex"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Variant Set"], "extent": [3083, 3096], "body": [{"type": "para", "indent": 4, "text": ["The name of the variant set to select a variant from."], "extent": [3117, 3176]}], "container": true, "attrs": {"id": "variantset"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Variant Set Index"], "extent": [3176, 3195], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Choose variant set by index"]}, " is on, the index of the variant set (in an alphabetically sorted list of variant sets on the primitive)."], "extent": [3220, 3367]}], "container": true, "attrs": {"id": "variantsetindex"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Choose Variant Name by Index"], "extent": [3367, 3397], "body": [{"type": "para", "indent": 4, "text": ["When this is on, you specify the variant using a number representing the index of a variant in the alphabetically sorted list of variants, rather than a name. If you are doing something like choosing a variant using a random number generator, it\u2019s easier to deal with variant sets by their index rather than their name."], "extent": [3426, 3751]}], "container": true, "attrs": {"id": "variantnameuseindex"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Variant Name"], "extent": [3751, 3765], "body": [{"type": "para", "indent": 4, "text": ["If not choosing the variant by index, this parameter is the name of the variant that should be selected within the specified variant set. If this value is an empty string, any existing variant selection specified in the active layer will be cleared. This will ", {"type": "q", "text": ["reveal"]}, " any variant selection opinions authored in weaker layers. If this value is set to the special string ", {"type": "code", "text": ["<block>"]}, ", an explicit empty variant selection will be made, blocking any variant selection opinions from weaker layers, leaving the chosen set without any variant selected.  If this is set to a list of variant names ('  ' or ',' separated), then this will use the first one that matches a valid variant name in each prim\u2019s variant set."], "extent": [3787, 4499]}], "container": true, "attrs": {"id": "variantname"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Variant Name Index"], "extent": [4499, 4519], "body": [{"type": "para", "indent": 4, "text": ["If choosing the variant by index, this parameter specifies the variant to select as an index into the alphabetically sorted list of variants in the variant set."], "extent": [4545, 4712]}], "container": true, "attrs": {"id": "variantnameindex"}, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [4712, 4721], "body": [{"type": "related_item_group", "body": [{"ext": null, "type": "related_item", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/lop/addvariant", "type": "link", "text": "", "fullpath": "/nodes/lop/addvariant.html"}], "role": "item", "extent": [4721, 4746]}, {"ext": null, "type": "related_item", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/lop/autoselectlod", "type": "link", "text": "", "fullpath": "/nodes/lop/autoselectlod.html"}], "role": "item", "extent": [4746, 4774]}], "container": true, "role": "item_group"}], "text": "Related"}], "title": ["Set Variant"], "summary": ["Selects (switches to) one of the variants stored in a variant set on a primitive."], "included": ["/nodes/lop/_primpattern"]}